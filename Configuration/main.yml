---
title: Custom
description: Custom Shuragen4ik configuration
privilege: Admin
actions:
  
  # OS Info
  - !task: {path: 'Tasks\registry\os-info\edition.yml'}
  - !task: {path: 'Tasks\registry\os-info\oem-info.yml'}

  - !task: {path: 'Tasks\start.yml'}
  
   
  - !task: {path: 'Tasks\packages\app-win32.yml'}
  - !task: {path: 'Tasks\registry\explorer\win-settings.yml'} # Run win-settings tasks early due to SettingsPageVisibility is hardcoded and messes up with the 'winpackage --install ai-removal' command
  # Uninstalling WinSxS packages before app-win32 could leave leftovers
  - !task: {path: 'Tasks\packages\win-sxs.yml'}
  - !task: {path: 'Tasks\packages\appx.yml'}

   
  # Defender requires explorer to be running to disable certain protections, so that's why Explorer is terminated afterward
  - !taskKill: {name: "explorer", errorAction: Ignore}
  - !taskKill: {name: "SearchApp", errorAction: Ignore}
  - !taskKill: {name: "SearchHost", errorAction: Ignore}
  - !taskKill: {name: "RuntimeBroker", errorAction: Ignore}
  - !taskKill: {name: "TextInputHost", errorAction: Ignore}
  - !taskKill: {name: "ShellExperienceHost", errorAction: Ignore}
  - !taskKill: {name: "backgroundTaskHost", errorAction: Ignore}
  - !taskKill: {name: "Widgets", errorAction: Ignore}

  - !task: {path: 'Tasks\software.yml'}
  - !task: {path: 'Tasks\services.yml'}
  
  # ============================================================================
  # === Windows Defender Options ===
  # ============================================================================
  
  # Option: disable-defender - Отключить Защитник Windows (UI остаётся доступным)
  - !writeStatus: {status: 'Disabling Windows Defender...', option: 'disable-defender'}
  - !powerShell:
      command: '-ExecutionPolicy Bypass -File "Disable-Defender.ps1"'
      exeDir: true
      wait: true
      option: 'disable-defender'
  
  # Option: keep-defender - Оставить Защитник Windows как есть (ничего не делаем)
  - !writeStatus: {status: 'Keeping Windows Defender as is...', option: 'keep-defender'}
  
  - !task: {path: 'Tasks\registry.yml'}
  - !task: {path: 'Tasks\revert.yml'}
  - !task: {path: 'Tasks\final.yml'}
